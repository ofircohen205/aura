apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: aura-staging

resources:
  - namespace.yaml
  - ../../base

configMapGenerator:
  - name: backend-config
    behavior: merge
    literals:
      - ENVIRONMENT=staging
      - LOG_LEVEL=INFO
      - LOG_FORMAT=json
  - name: web-dashboard-config
    behavior: merge
    literals:
      - NODE_ENV=production
      - NEXT_PUBLIC_API_URL=https://api.staging.aura.example.com

images:
  - name: aura-backend
    newName: ghcr.io/ofircohen205/aura-backend
    newTag: staging
  - name: aura-web-dashboard
    newName: ghcr.io/ofircohen205/aura-web-dashboard
    newTag: staging

patchesStrategicMerge:
  - backend-patch.yaml
  - web-patch.yaml
  - postgres-patch.yaml
