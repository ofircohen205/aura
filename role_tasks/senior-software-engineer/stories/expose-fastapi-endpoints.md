# Story: Expose FastAPI Endpoints for Multi-Client Access

**GitHub Issue**: #2

**Role:** Senior Software Engineer
**Related SRS Section:** 1, 2.1, 4.1

## Desired Feature

The Aura backend needs to serve multiple clients (VSCode, CLI, GitHub App, Dashboard). We need a clean, versioned REST API (FastAPI) that exposes the core logic (Workflows, RAG, User preferences).

## Planning & Technical Spec

### Architecture

- **Framework**: FastAPI.
- **Routers**:
  - `/api/v1/events`: Fire-and-forget events (telemetry, struggle signals).
  - `/api/v1/lessons`: Retrieve content.
  - `/api/v1/audit`: Trigger code audits.
  - `/api/v1/config`: User configuration storage.
- **Authentication**: Bearer Token (validated against `AURA_API_KEY` for MVP).

### Standards & Workflows

- **Git Flow**: Create a new branch for this story and work only on that branch.
- **Issue Updates**: Reference the GitHub Issue (check header) in your commits and PRs.
- **Implementation**: Follow `docs/workflows/common-tasks.md` "Backend: Adding a New API Endpoint" (Model -> DAO -> Service -> API).
- **Structure**: Follow `docs/workflows/project-architecture.md` "Backend Architecture".

### Implementation Checklist

- [ ] Initialize FastAPI app with CORS middleware.
- [ ] Define Pydantic models for Requests/Responses (EventRequest, LessonResponse).
- [ ] Create `routers/events.py` and `routers/audit.py`.
- [ ] Wire up dependency injection for Services (RagService, WorkflowService).
- [ ] Generate OpenAPI schema (auto-generated by FastAPI).

## Testing Plan

- **Automated Tests**:
  - [ ] `TestClient` (Startlette) tests for each endpoint.
  - [ ] Verify 401 Unauthorized for missing keys.
- **Manual Verification**:
  - [ ] Run server `uvicorn main:app --reload`.
  - [ ] Visit `http://localhost:8000/docs` and execute a request.
